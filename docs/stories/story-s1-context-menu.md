# Story S1 — 右键菜单与页面翻译开关

## 背景
用户需要通过右键菜单快速控制翻译流程：在不同上下文中添加/移除词条，以及启动或停止整个页面翻译。

## 用户价值
- 选中原文生词即可即时加入词库并翻译，提升学习效率。
- 对已翻译词条可以回退，维护词库准确性。
- 可以随时开启/关闭页面翻译，保持阅读节奏。

## 需求要点
1. 原文选中 → 菜单显示 `add & mini-translate`，执行添加并翻译。
2. 已翻译选中 → 菜单显示 `remove from mini-translate`，执行移除并恢复原文。
3. 任意位置右键 → 显示 `start mini-translate` 或 `stop mini-translate`（状态互斥）。
4. Background 维护 `tab` 翻译状态；Content script 根据命令批量翻译或恢复。
5. 菜单更新需≤500ms，操作反馈清晰。

## 验收标准
- 三种场景下菜单项正确展示且逻辑互斥。
- 添加后页面对应词条立即翻译；移除后恢复原文。
- 页面翻译开关可重复开启/关闭，并确保状态持久至标签关闭。
- QA 覆盖主流程与异常场景（API 失败、无选区等）。

## QA Results
- Gate: PASS — 导入的右键菜单逻辑支持添加、移除与页面级开关，词库/翻译事件与 content script 联动正常。
- Tests: `npm run validate`
- Notes: 自动化覆盖词库上限、菜单增删、翻译开启/关闭；需在浏览器环境验证通知展示与实际 API 调用。
