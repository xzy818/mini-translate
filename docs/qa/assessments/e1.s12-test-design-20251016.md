# Test Design: Story E1.S12 – 右键状态切换

Date: 2025-10-16
Designer: Quinn (Test Architect)

## Test Strategy Overview

- Total test scenarios: 6
- Unit tests: 3 (50%)
- Integration tests: 2 (33%)
- E2E tests: 1 (17%)
- Priority distribution: P0: 3, P1: 3

## Test Scenarios by Acceptance Criteria

### AC1: 根据页面与选区状态，右键菜单展示正确的动作与标题

| ID              | Level | Priority | Test 描述                                   | Justification                     |
|-----------------|-------|----------|--------------------------------------------|-----------------------------------|
| E1.S12-UNIT-001 | unit  | P0       | 新选区→返回 add 动作与标题                  | 纯函数逻辑，单元层即可             |
| E1.S12-UNIT-002 | unit  | P0       | 已翻译选区→返回 remove 动作与标题           | 同上                               |
| E1.S12-INT-001  | int   | P1       | onShown→onClicked 全链路，菜单状态正确传播  | 涉及 chrome stubs 与缓存，需集成   |

### AC2: 无选区时隐藏菜单

| ID              | Level | Priority | Test 描述                          | Justification |
|-----------------|-------|----------|-----------------------------------|---------------|
| E1.S12-UNIT-003 | unit  | P0       | 无选区→返回 null 并指示隐藏        | 纯逻辑判断    |

### AC3: 状态切换后页面与词库同步更新并可回退

| ID              | Level | Priority | Test 描述                                        | Justification        |
|-----------------|-------|----------|-------------------------------------------------|----------------------|
| E1.S12-INT-002  | int   | P1       | add 后触发翻译并广播 VOCAB_UPDATED               | 组件交互，集成层验证 |
| E1.S12-E2E-001  | e2e   | P1       | 全流程：add→remove→页面回退且词库一致            | 用户旅程端到端验证   |

## Recommended Execution Order

1. P0 单元测试（E1.S12-UNIT-001/002/003）
2. P1 集成测试（E1.S12-INT-001/002）
3. P1 端到端测试（E1.S12-E2E-001）

Test design matrix: docs/qa/assessments/e1.s12-test-design-20251016.md
P0 tests identified: 3
