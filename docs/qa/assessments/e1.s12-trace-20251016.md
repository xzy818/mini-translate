# Requirements Traceability Matrix – Story E1.S12 右键状态切换

## Coverage Summary

- Total Requirements: 3 (AC1–AC3)
- Fully Covered: 2
- Partially Covered: 1
- Not Covered: 0

## Requirement Mappings

### AC1: 根据页面与选区状态展示正确动作与标题

- Unit: `E1.S12-UNIT-001/002` – 断言 resolve 逻辑返回 add/remove 与标题
- Integration: `E1.S12-INT-001` – onShown→onClicked 流程中菜单状态一致性
- Coverage: FULL

### AC2: 无选区时隐藏菜单

- Unit: `E1.S12-UNIT-003` – 无选区返回 null/hidden 标志
- Coverage: FULL

### AC3: 状态切换同步更新并可回退

- Integration: `E1.S12-INT-002` – add 后触发翻译与 VOCAB_UPDATED 广播
- E2E: `E1.S12-E2E-001` – add→remove 全流程词库与页面一致
- Coverage: PARTIAL（依赖端到端环境稳定性，建议增加错误场景）

## Gaps & Recommendations

- Gap: AC3 缺失错误分支（API 限流/失败）与回退后的缓存失配验证。
- Suggestion: 新增集成测试覆盖错误重试与失败提示路径；端到端加入网络失败桩。

trace:
  totals:
    requirements: 3
    full: 2
    partial: 1
    none: 0
  planning_ref: 'docs/qa/assessments/e1.s12-test-design-20251016.md'
  uncovered: []
  notes: 'docs/qa/assessments/e1.s12-trace-20251016.md'
