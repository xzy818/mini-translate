{
  "metadata": {
    "name": "mini-translate-storage-snapshot",
    "description": "Capture chrome.storage local and session state via QA hooks"
  },
  "setup": {
    "notes": [
      "Requires QA build with chrome.storage instrumentation enabled"
    ]
  },
  "steps": [
    {
      "tool": "new_page",
      "params": {
        "url": "chrome-extension://<EXTENSION_ID_PLACEHOLDER>/options.html?qa=1"
      }
    },
    {
      "tool": "evaluate_script",
      "params": {
        "function": "async () => { const read = (api) => new Promise((resolve, reject) => { api.get(null, (data) => { const err = chrome.runtime?.lastError; if (err) { reject(err.message); return; } resolve(data); }); }); const local = await read(chrome.storage.local); const session = chrome.storage.session ? await read(chrome.storage.session) : {}; return JSON.stringify({ ok: true, local, session }, null, 2); }",
        "saveAs": "@artifact/options/storage-after-save.json"
      }
    },
    {
      "tool": "navigate_page",
      "params": {
        "url": "https://example.com/"
      }
    },
    {
      "tool": "wait_for",
      "params": {
        "text": "Example Domain"
      }
    },
    {
      "tool": "navigate_page",
      "params": {
        "url": "chrome-extension://<EXTENSION_ID_PLACEHOLDER>/options.html?qa=1"
      }
    },
    {
      "tool": "evaluate_script",
      "params": {
        "function": "async () => { const read = (api) => new Promise((resolve, reject) => { api.get(null, (data) => { const err = chrome.runtime?.lastError; if (err) { reject(err.message); return; } resolve(data); }); }); const local = await read(chrome.storage.local); const session = chrome.storage.session ? await read(chrome.storage.session) : {}; return JSON.stringify({ ok: true, local, session }, null, 2); }",
        "saveAs": "@artifact/context-menu/storage-after-page.json"
      }
    }
  ]
}
