{
  "metadata": {
    "name": "mini-translate-context-menu",
    "description": "Validate add/remove/start-stop context menu scenes"
  },
  "setup": {
    "notes": [
      "Load dist/ extension and capture its ID; replace <EXTENSION_ID> before execution.",
      "Navigate to a content page containing the phrases defined in sample data (e.g. https://example.com)."
    ]
  },
  "steps": [
    {
      "tool": "new_page",
      "params": {
        "url": "chrome-extension://<EXTENSION_ID>/options.html?qa=1"
      }
    },
    {
      "tool": "evaluate_script",
      "params": {
        "expression": "(async () => { const input = document.getElementById('qa-term-input'); input.value = 'Example Domain'; document.getElementById('qa-add').click(); await new Promise(r => setTimeout(r, 300)); })()"
      },
      "notes": "通过 QA 面板添加词条"
    },
    {
      "tool": "wait_for",
      "params": {
        "text": "已添加词条"
      }
    },
    {
      "tool": "evaluate_script",
      "params": {
        "expression": "(async () => { document.getElementById('qa-toggle').click(); await new Promise(r => setTimeout(r, 200)); })()"
      },
      "notes": "切换翻译状态"
    },
    {
      "tool": "wait_for",
      "params": {
        "text": "已开启页面翻译 (QA)"
      }
    },
    {
      "tool": "evaluate_script",
      "params": {
        "expression": "(async () => { document.getElementById('qa-term-input').value = 'Example Domain'; document.getElementById('qa-remove').click(); await new Promise(r => setTimeout(r, 300)); })()"
      },
      "notes": "通过 QA 面板移除词条"
    },
    {
      "tool": "wait_for",
      "params": {
        "text": "已移除词条"
      }
    },
    {
      "tool": "navigate_page",
      "params": {
        "url": "chrome-extension://<EXTENSION_ID>/options.html?qa=1"
      }
    },
    {
      "tool": "wait_for",
      "params": {
        "text": "词库为空"
      }
    },
    {
      "tool": "take_screenshot",
      "params": {
        "path": "../../test-artifacts/mcp/context-menu-scenes.png"
      }
    }
  ],
  "teardown": {
    "notes": [
      "Restore selection and clear QA helpers via evaluate_script if necessary."
    ]
  }
}
