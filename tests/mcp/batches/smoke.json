{
  "metadata": {
    "name": "mini-translate-smoke",
    "description": "Core smoke flow for Mini Translate extension using chrome-devtools-mcp"
  },
  "setup": {
    "notes": [
      "Ensure Chrome with remote debugging is running on http://127.0.0.1:9222 and the dist/ extension is loaded",
      "Start MCP server: npx chrome-devtools-mcp --browserUrl http://127.0.0.1:9222"
    ]
  },
  "steps": [
    {
      "tool": "new_page",
      "params": {
        "url": "chrome-extension://acfpkkkhehadjlkdnffdkoilmhchefbl/options.html"
      }
    },
    {
      "tool": "take_snapshot",
      "params": {
        "path": "@artifact/options/options-before.dom.json"
      },
      "notes": "Capture DOM snapshot for baseline"
    },
    {
      "tool": "fill",
      "params": {
        "uid": "2_38",
        "value": "gpt-4o-mini"
      }
    },
    {
      "tool": "fill",
      "params": {
        "uid": "2_45",
        "value": "stub://translator/success"
      }
    },
    {
      "tool": "fill",
      "params": {
        "uid": "2_47",
        "value": "qa-local-key"
      }
    },
    {
      "tool": "click",
      "params": {
        "uid": "2_49"
      }
    },
    {
      "tool": "wait_for",
      "params": {
        "text": "已保存"
      }
    },
    {
      "tool": "upload_file",
      "params": {
        "uid": "2_56",
        "filePath": "@project/tests/mcp/data/sample-vocab.json"
      }
    },
    {
      "tool": "wait_for",
      "params": {
        "text": "导入完成"
      }
    },
    {
      "tool": "take_snapshot",
      "params": {
        "path": "@artifact/options/options-after-import.dom.json"
      },
      "notes": "Verify table updates and pagination"
    },
    {
      "tool": "navigate_page",
      "params": {
        "url": "https://example.com"
      }
    },
    {
      "tool": "evaluate_script",
      "params": {
        "function": "() => { window.getSelection().selectAllChildren(document.body); }"
      }
    },
    {
      "tool": "take_screenshot",
      "params": {
        "path": "@artifact/context-menu/example-domain-after.png"
      }
    }
  ],
  "teardown": {
    "notes": [
      "Close extra tabs created during the run if necessary"
    ]
  }
}
