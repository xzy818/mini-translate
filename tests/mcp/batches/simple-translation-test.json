{
  "metadata": {
    "name": "simple-translation-test",
    "description": "Simple test to verify extension is loaded and can perform basic translation operations"
  },
  "setup": {
    "notes": [
      "Load dist/ extension and verify it's working with basic operations."
    ]
  },
  "steps": [
    {
      "tool": "new_page",
      "params": {
        "url": "https://example.com"
      }
    },
    {
      "tool": "evaluate_script",
      "params": {
        "function": "async () => { document.body.innerHTML = '<div>Hello World</div><div>Example Domain</div><div>Test Translation</div>'; }"
      },
      "notes": "设置测试页面内容"
    },
    {
      "tool": "evaluate_script",
      "params": {
        "function": "async () => { const text = 'Hello World'; const selection = window.getSelection(); const range = document.createRange(); const textNode = document.querySelector('div').firstChild; range.selectNode(textNode); selection.removeAllRanges(); selection.addRange(range); console.log('Selected text:', selection.toString()); return selection.toString(); }"
      },
      "notes": "选中文本 'Hello World'"
    },
    {
      "tool": "evaluate_script",
      "params": {
        "function": "async () => { const event = new MouseEvent('contextmenu', { bubbles: true, cancelable: true, clientX: 100, clientY: 100 }); document.dispatchEvent(event); console.log('Context menu triggered'); return 'Context menu triggered'; }"
      },
      "notes": "触发右键菜单"
    },
    {
      "tool": "wait_for",
      "params": {
        "text": "Add to vocabulary",
        "timeout": 10000
      }
    },
    {
      "tool": "evaluate_script",
      "params": {
        "function": "async () => { const menuItems = document.querySelectorAll('[data-qa=\"add-term\"]'); console.log('Found menu items:', menuItems.length); if (menuItems.length > 0) { menuItems[0].click(); console.log('Clicked add term menu'); } return 'Menu items found: ' + menuItems.length; }"
      },
      "notes": "点击添加词条菜单"
    },
    {
      "tool": "wait_for",
      "params": {
        "text": "Hello World",
        "timeout": 5000
      }
    },
    {
      "tool": "take_screenshot",
      "params": {
        "path": "@artifact/simple-translation-test/after-add-term.png"
      }
    }
  ],
  "teardown": {
    "notes": [
      "Test completed - extension functionality verified"
    ]
  }
}
